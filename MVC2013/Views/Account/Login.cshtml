@using MVC2013.Models
@model LoginViewModel
@{
    ViewBag.Title = "Iniciar sesión";
    Layout = "~/Views/Shared/_LayoutLogin.cshtml";
}

<div class="login-box-body">
    <h2>@ViewBag.Title.</h2>
    @*<div class="row">
        <div class="col-md-8">*@
    @if (ViewBag.session_expired != null)
    {
        <div class="modal fade" id="expired">
            <div class="modal-dialog modal-sm">
                <div class="modal-content">
                    <div class="modal-header">
                        <h4>Sesión expirada</h4>
                    </div>
                    <div class="modal-body">
                        <p>@ViewBag.session_expired</p>
                    </div>
                    <div class="modal-footer">
                        <button class="btn btn-success" data-dismiss="modal">
                            Aceptar
                        </button>
                    </div>
                </div>
            </div>
        </div>
    }
    @*<section id="loginForm">*@

    @using (Html.BeginForm("Login", "Account", new { ReturnUrl = ViewBag.ReturnUrl }, FormMethod.Post, new { role = "form" }))
    {
        @Html.AntiForgeryToken()
        <p class="login-box-msg"><h4>Ingrese sus credenciales para iniciar sesión.</h4></p>
        <hr />

        <div class="form-group has-feedback">
            @Html.TextBoxFor(m => m.Usuario, new { @class = "form-control", @placeholder = "Usuario", @autocomplete = "off" })
            <span class="glyphicon glyphicon-user form-control-feedback"></span>
        </div>

        <div class="form-group has-feedback">
            @Html.PasswordFor(m => m.Password, new { @class = "form-control", @placeholder = "Contraseña" })
            <span class="glyphicon glyphicon-lock form-control-feedback"></span>
        </div>
        <div class="form-group has-feedback">
            @Html.DropDownList("Empresa", null, htmlAttributes: new { @class = "form-control" })
            <span class="glyphicon glyphicon-tag form-control-feedback"></span>
        </div>
        @*@Html.ValidationSummary(true, "", new { @class = "text-danger" })
            <div class="form-group">
                @Html.LabelFor(m => m.Usuario, new { @class = "col-md-2 control-label" })
                <div class="col-md-10">
                    @Html.TextBoxFor(m => m.Usuario, new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.Usuario, "", new { @class = "text-danger" })
                </div>
            </div>
            <div class="form-group">
                @Html.LabelFor(m => m.Password, new { @class = "col-md-2 control-label" })
                <div class="col-md-10">
                    @Html.PasswordFor(m => m.Password, new { @class = "form-control" })
                    @Html.ValidationMessageFor(m => m.Password, "", new { @class = "text-danger" })
                </div>
            </div>

            <div class="form-group">
                @Html.LabelFor(m => m.Empresa, "Empresas", new { @class = "col-md-2 control-label" })
                <div class="col-md-10">
                    @Html.DropDownList("Empresa", null, htmlAttributes: new { @class = "form-control" })
                </div>
            </div>*@


        <div class="row">
            <div class="col-xs-8">
                <input type="submit" value="Iniciar sesión" class="btn btn-primary" />
            </div>
            <!-- /.col -->
            <div class="col-xs-4">

            </div>
            <!-- /.col -->


        </div>
        <br />
        <div class="row">
            <strong>ERPGEO</strong>, Derechos reservados 2018
        </div>

    }

</div>

@section Scripts {
    @Scripts.Render("~/bundles/jqueryval")
    @if (ViewBag.session_expired != null)
    {
        <script>
            $(function () {
                $("#expired").modal();
                $('#Usuario').focus();
            })
        </script>
    }
    else
    {
        <script>
            $('#Usuario').focus();
        </script>
    }
}